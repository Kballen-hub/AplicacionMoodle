<a class="skippy visually-hidden" href="#content">
  <span class="skippy-text">Skip to main content</span>
</a>


<div class="container-fluid p-0 bg-white" data-region="componentlibrary">
    <div class="row g-0 flex-xl-nowrap">
        <div class="col-md-3 col-xl-2 sidebar">
            <div class="controls d-flex justify-content-between">
                <div class="simplesearchform w-100">
                    <form autocomplete="off" method="get" accept-charset="utf-8"
                        class="mform d-flex flex-wrap align-items-center simplesearchform p-2 justify-content-center">
                        <div class="input-group w-100" data-region="docsearch">
                            <label for="searchinput-componentlibrary">
                                <span class="visually-hidden">Search component library</span>
                            </label>
                            <input type="text" id="searchinput-componentlibrary" class="form-control rounded" placeholder="Search"
                                aria-label="Search component library" name="clsearch" data-region="input" autocomplete="off">
                            <ul class="dropdown-menu w-100">
                            </ul>
                        </div>
                    </form>
                </div>
                <button class="btn bd-search-docs-toggle d-md-none p-0 ms-3" type="button" data-bs-toggle="collapse"
                    data-bs-target="#docssidebar" aria-controls="docssidebar" aria-expanded="false" aria-label="Toggle docs navigation">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false">
                        <title>Menu</title>
                        <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2"
                            d="M4 7h22M4 15h22M4 23h22"></path>
                    </svg>
                </button>
            </div>
            
<nav id="docssidebar" class="collapse d-md-block docs-sidebar" aria-label="Component Library Navigation">
<ul>

<li class="parent"><a href="#" data-bs-toggle="collapse" data-bs-target="#collapse653a408ab95e41dcde1c00945f6c01a9" aria-expanded="true" aria-controls="collapse653a408ab95e41dcde1c00945f6c01a9" class="dropdown-toggle"><div class="text-truncate">Moodle</div></a>
  
<ul id="collapse653a408ab95e41dcde1c00945f6c01a9" class="sub-menu collapse show">

<li class="parent"><a href="#" data-bs-toggle="collapse" data-bs-target="#collapsee74fae0ce25d18ab8db372c1fbe8aff4" aria-expanded="true" aria-controls="collapsee74fae0ce25d18ab8db372c1fbe8aff4" class="dropdown-toggle"><div class="text-truncate">Moodle Components</div></a>
  
<ul id="collapsee74fae0ce25d18ab8db372c1fbe8aff4" class="sub-menu collapse show">
<li class=""><a href="http://MOODLEROOT/moodle/components/activityicons/">Activity icons</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/buttons/">Buttons</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/coursecards/">Course cards</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/form-elements/">Form elements</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/footer/">Footer</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/moodle-icons/">Icons</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/alert-badge/">Notification badges</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/notifications/">Notifications</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/toggle/">Toggle input</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/search-input/">Search input</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/showmore/">Show more</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/collapsable-sections/">Collapsable sections</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/task-indicator/">Task indicator</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/actionmenu/">Action menus</a></li>
<li class="active"><a href="http://MOODLEROOT/moodle/components/dropdowns/">Dropdowns</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/dom-modal/">HTML Modals</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/components/dynamictabs/">Dynamic tabs</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-bs-toggle="collapse" data-bs-target="#collapse2deb5d1f39ceccabee606a451a2aff3f" aria-expanded="true" aria-controls="collapse2deb5d1f39ceccabee606a451a2aff3f" class="dropdown-toggle"><div class="text-truncate">JavaScript</div></a>
  
<ul id="collapse2deb5d1f39ceccabee606a451a2aff3f" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/moodle/javascript/confirm/">Confirm</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/toast/">Toast</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/emojipicker/">Emojipicker</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/sortable-list/">Sortable list</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/javascript/charts/">Moodle Charts</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-bs-toggle="collapse" data-bs-target="#collapsec0c192728c4cce66abc09c21eccf41fa" aria-expanded="true" aria-controls="collapsec0c192728c4cce66abc09c21eccf41fa" class="dropdown-toggle"><div class="text-truncate">Accessibility</div></a>
  
<ul id="collapsec0c192728c4cce66abc09c21eccf41fa" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/moodle/accessibility/links/">Links</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/accessibility/contrast/">Colour contrast</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/accessibility/keyboard-access/">Keyboard access</a></li>
</ul>
  
</li>

<li class=""><a href="#" data-bs-toggle="collapse" data-bs-target="#collapse7b7cb3e12f31632afcffe09ab4202917" aria-expanded="true" aria-controls="collapse7b7cb3e12f31632afcffe09ab4202917" class="dropdown-toggle"><div class="text-truncate">Themes</div></a>
  
<ul id="collapse7b7cb3e12f31632afcffe09ab4202917" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/moodle/themes/colours/">Colours</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/grids/">Grids</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/positioning/">Positioning</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/spacing/">Spacing</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/iconsizes/">Icon Sizes</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/layout/">Layout</a></li>
<li class=""><a href="http://MOODLEROOT/moodle/themes/text/">Text</a></li>
</ul>
  
</li>
</ul>
  
</li>

<li class=""><a href="#" data-bs-toggle="collapse" data-bs-target="#collapse9ba5be266a0aa16e270533121dec231a" aria-expanded="true" aria-controls="collapse9ba5be266a0aa16e270533121dec231a" class="dropdown-toggle"><div class="text-truncate">Component library</div></a>
  
<ul id="collapse9ba5be266a0aa16e270533121dec231a" class="sub-menu collapse ">
<li class=""><a href="http://MOODLEROOT/library/getting-started/">Getting started</a></li>
<li class=""><a href="http://MOODLEROOT/library/adding-pages/">Adding pages</a></li>
<li class=""><a href="http://MOODLEROOT/library/adding-images/">Adding images</a></li>
<li class=""><a href="http://MOODLEROOT/library/syntax-highlighting/">Syntax highlighting</a></li>
<li class=""><a href="http://MOODLEROOT/library/component-library-backend/">Component Library Backend</a></li>
<li class=""><a href="http://MOODLEROOT/library/example-files/">Example files</a></li>
<li class=""><a href="http://MOODLEROOT/library/moodle-javascript/">Moodle JavaScript</a></li>
<li class=""><a href="http://MOODLEROOT/library/moodle-templates/">Moodle templates</a></li>
</ul>
  
</li>
</ul>
</nav>



        </div>
        
        <div class="col-md-9 col-xl-10 py-md-3 ps-md-5 pe-md-5 bd-content">
        
            <h1 class="bd-title" id="content">Dropdowns</h1>
            <p class="bd-lead">A reusable dropdown component</p>

            

            
              

                  <div class="badge bg-info text-white">MDL-78279</div>

              

                  <div class="badge bg-info text-white">4.3</div>

              
            

            <h2 id="how-it-works">How it works</h2>
<p>Moodle dropdowns are output components to generate elements that expand extra floating information when clicked.</p>
<p>Currently, the core comes with two prebuild dropdowns:</p>
<ul>
<li>Dropdown dialog: to display rich content inside the dropdown area.</li>
<li>Dropdown status: to display a list of available statuses</li>
</ul>
<h2 id="source-files">Source files</h2>
<ul>
<li><code>lib/classes/output/local/dialog.php</code>: to define a dropdown dialog.</li>
<li><code>lib/classes/output/local/dialog.php</code>: to define a dropdown dialog.</li>
<li><code>lib/classes/output/choicelist.php</code>: generic output class to define a user choice.</li>
<li><code>lib/templates/local/dropdown/dialog.mustache</code></li>
<li><code>lib/templates/local/dropdown/status.mustache</code></li>
</ul>
<h2 id="usage">Usage</h2>
<h3 id="dropdown-dialog">Dropdown dialog</h3>
<p>The constructor for the dropdown dialog class only requires three parameters.</p>
<ul>
<li>The button content</li>
<li>The dropdown content</li>
<li>An array of additional definitions. However, the output public methods can override all the definition values once the instance is created. Check out the examples to learn how to use them</li>
</ul>
<p>The following example is the most simple example of creating a dropdown:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\dialog</span><span class="p">(</span><span class="s1">&#39;Open dialog button&#39;</span><span class="p">,</span> <span class="s1">&#39;Dialog content&#39;</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<p>You have the option to include additional classes to the main component but also to the button itself.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\dialog</span><span class="p">(</span>
    <span class="s1">&#39;Open dialog&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Dialog content&#39;</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s1">&#39;classes&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mb-4&#39;</span><span class="p">,</span>
        <span class="s1">&#39;buttonclasses&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;btn btn-primary extraclass&#39;</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<div id="root60" data-region="mustachecode" data-template="core/local/dropdown/dialog" class="mb-5 mt-2 bg-light p-4">
    <div class="d-none" data-region="rawcontext">    {
        &#34;buttonid&#34; : &#34;example01&#34;,
        &#34;buttoncontent&#34; : &#34;Open dialog&#34;,
        &#34;dialogcontent&#34; : &#34;Dialog content&#34;,
        &#34;buttonclasses&#34;: &#34;btn btn-primary extraclass&#34;
    }</div>
    <h6 data-action="refresh" class="mb-3">core/local/dropdown/dialog</h6>
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active"
                id="nav-rendered60-tab"
                data-bs-toggle="tab"
                href="#nav-rendered60"
                role="tab" aria-controls="nav-rendered60" aria-selected="true"
            >
                Rendered
            </a>
            <a class="nav-item nav-link"
                id="nav-template60-tab"
                data-bs-toggle="tab"
                href="#nav-template60" role="tab" aria-controls="nav-template60" aria-selected="false"
            >
                Template
            </a>
            <a class="nav-item nav-link"
                id="nav-variables60-tab"
                data-bs-toggle="tab"
                href="#nav-variables60" role="tab" aria-controls="nav-variables60" aria-selected="false"
            >
                Variables
            </a>
        </div>
    </nav>
    <div class="tab-content border-start border-bottom border-end p-3 bg-white" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-rendered60" role="tabpanel" aria-labelledby="nav-rendered60-tab">
            <div data-region="mustacherendered" class="">
                <div class="d-flex justify-content-center my-5">
                    <div class="spinner-grow text-secondary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="nav-template60" role="tabpanel" aria-labelledby="nav-template60-tab">
            <pre data-region="mustachesource" class="mb3">
            </pre>
        </div>
        <div class="tab-pane fade" id="nav-variables60" role="tabpanel" aria-labelledby="nav-variables60-tab">
            <div data-region="mustachecontext" class="mb3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js">    <span class="p">{</span>
        <span class="s2">&#34;buttonid&#34;</span> <span class="o">:</span> <span class="s2">&#34;example01&#34;</span><span class="p">,</span>
        <span class="s2">&#34;buttoncontent&#34;</span> <span class="o">:</span> <span class="s2">&#34;Open dialog&#34;</span><span class="p">,</span>
        <span class="s2">&#34;dialogcontent&#34;</span> <span class="o">:</span> <span class="s2">&#34;Dialog content&#34;</span><span class="p">,</span>
        <span class="s2">&#34;buttonclasses&#34;</span><span class="o">:</span> <span class="s2">&#34;btn btn-primary extraclass&#34;</span>
    <span class="p">}</span></code></pre></div></div>
        </div>
    </div>
</div>

<p>If a specific item is floating towards the end of the page, you might consider aligning the dropdown menu to the left rather than to the right. To achieve this, you can use the POSITION constant values to set the <code>dropdownposition</code> $definition attribute or input it into the <code>set_position</code> method.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\dialog</span><span class="p">(</span><span class="s1">&#39;Open dialog&#39;</span><span class="p">,</span> <span class="s1">&#39;Dialog content&#39;</span><span class="p">);</span>
<span class="nv">$dialog</span><span class="o">-&gt;</span><span class="na">set_position</span><span class="p">(</span><span class="nx">core\output\local\dropdown\dialog</span><span class="o">::</span><span class="na">POSITION</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<p>By default, the dropdown width will adapt to the content. However, for long texts, there may be better scenarios. You can use the WIDTH constant values to set the <code>dialogwidth</code> $definition attribute or input it into the <code>set_dialog_width</code> method.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="c1">// Big but fixed-width example.
</span><span class="c1"></span><span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\dialog</span><span class="p">(</span><span class="s1">&#39;Big dialog&#39;</span><span class="p">,</span> <span class="nv">$content</span><span class="p">);</span>
<span class="nv">$dialog</span><span class="o">-&gt;</span><span class="na">set_dialog_width</span><span class="p">(</span><span class="nx">core\output\local\dropdown\dialog</span><span class="o">::</span><span class="na">WIDTH</span><span class="p">[</span><span class="s1">&#39;big&#39;</span><span class="p">]);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>

<span class="c1">// Small width example.
</span><span class="c1"></span><span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\dialog</span><span class="p">(</span><span class="s1">&#39;Small dialog&#39;</span><span class="p">,</span> <span class="nv">$content</span><span class="p">);</span>
<span class="nv">$dialog</span><span class="o">-&gt;</span><span class="na">set_dialog_width</span><span class="p">(</span><span class="nx">core\output\local\dropdown\dialog</span><span class="o">::</span><span class="na">WIDTH</span><span class="p">[</span><span class="s1">&#39;small&#39;</span><span class="p">]);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<div id="root91" data-region="mustachecode" data-template="core/local/dropdown/dialog" class="mb-5 mt-2 bg-light p-4">
    <div class="d-none" data-region="rawcontext">    {
        &#34;buttonid&#34; : &#34;example02&#34;,
        &#34;buttoncontent&#34; : &#34;Big dialog&#34;,
        &#34;dialogcontent&#34; : &#34;This is a long content for a big dialog that will be displayed in a fixed-width container.&#34;,
        &#34;buttonclasses&#34;: &#34;btn btn-primary extraclass&#34;,
        &#34;dialogclasses&#34;: &#34;dialog-big&#34;
    }</div>
    <h6 data-action="refresh" class="mb-3">core/local/dropdown/dialog</h6>
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active"
                id="nav-rendered91-tab"
                data-bs-toggle="tab"
                href="#nav-rendered91"
                role="tab" aria-controls="nav-rendered91" aria-selected="true"
            >
                Rendered
            </a>
            <a class="nav-item nav-link"
                id="nav-template91-tab"
                data-bs-toggle="tab"
                href="#nav-template91" role="tab" aria-controls="nav-template91" aria-selected="false"
            >
                Template
            </a>
            <a class="nav-item nav-link"
                id="nav-variables91-tab"
                data-bs-toggle="tab"
                href="#nav-variables91" role="tab" aria-controls="nav-variables91" aria-selected="false"
            >
                Variables
            </a>
        </div>
    </nav>
    <div class="tab-content border-start border-bottom border-end p-3 bg-white" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-rendered91" role="tabpanel" aria-labelledby="nav-rendered91-tab">
            <div data-region="mustacherendered" class="">
                <div class="d-flex justify-content-center my-5">
                    <div class="spinner-grow text-secondary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="nav-template91" role="tabpanel" aria-labelledby="nav-template91-tab">
            <pre data-region="mustachesource" class="mb3">
            </pre>
        </div>
        <div class="tab-pane fade" id="nav-variables91" role="tabpanel" aria-labelledby="nav-variables91-tab">
            <div data-region="mustachecontext" class="mb3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js">    <span class="p">{</span>
        <span class="s2">&#34;buttonid&#34;</span> <span class="o">:</span> <span class="s2">&#34;example02&#34;</span><span class="p">,</span>
        <span class="s2">&#34;buttoncontent&#34;</span> <span class="o">:</span> <span class="s2">&#34;Big dialog&#34;</span><span class="p">,</span>
        <span class="s2">&#34;dialogcontent&#34;</span> <span class="o">:</span> <span class="s2">&#34;This is a long content for a big dialog that will be displayed in a fixed-width container.&#34;</span><span class="p">,</span>
        <span class="s2">&#34;buttonclasses&#34;</span><span class="o">:</span> <span class="s2">&#34;btn btn-primary extraclass&#34;</span><span class="p">,</span>
        <span class="s2">&#34;dialogclasses&#34;</span><span class="o">:</span> <span class="s2">&#34;dialog-big&#34;</span>
    <span class="p">}</span></code></pre></div></div>
        </div>
    </div>
</div>

<h3 id="dropdown-status">Dropdown status</h3>
<p>The dropdown status is a user-choice wrapper. To create it, first, you need to create an instance of <code>core\output\choicelist</code> that will be used to generate the dropdown content data.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$choice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\choicelist</span><span class="p">(</span><span class="s1">&#39;Dialog content&#39;</span><span class="p">);</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="s1">&#39;Option 1&#39;</span><span class="p">);</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="s1">&#39;Option 2&#39;</span><span class="p">);</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option3&#39;</span><span class="p">,</span> <span class="s1">&#39;Option 3&#39;</span><span class="p">);</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">set_selected_value</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">);</span>

<span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\status</span><span class="p">(</span><span class="s1">&#39;Open dialog button&#39;</span><span class="p">,</span> <span class="nv">$choice</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<div id="root116" data-region="mustachecode" data-template="core/local/dropdown/status" class="mb-5 mt-2 bg-light p-4">
    <div class="d-none" data-region="rawcontext">    {
        &#34;buttonid&#34; : &#34;example04&#34;,
        &#34;buttoncontent&#34; : &#34;Open dialog button&#34;,
        &#34;dialogcontent&#34; : &#34;Dialog content&#34;,
        &#34;choices&#34; : {
            &#34;hasoptions&#34; : true,
            &#34;options&#34; : [
                {
                    &#34;optionid&#34; : &#34;option1&#34;,
                    &#34;value&#34; : &#34;option1&#34;,
                    &#34;name&#34; : &#34;Option 1&#34;,
                    &#34;hasicon&#34; : false,
                    &#34;first&#34; : true,
                    &#34;optionnumber&#34; : 1,
                    &#34;optionuniqid&#34; : &#34;option1uniqid&#34;
                },
                {
                    &#34;optionid&#34; : &#34;option2&#34;,
                    &#34;value&#34; : &#34;option2&#34;,
                    &#34;name&#34; : &#34;Option 2&#34;,
                    &#34;hasicon&#34; : false,
                    &#34;selected&#34; : true,
                    &#34;optionnumber&#34; : 2,
                    &#34;optionuniqid&#34; : &#34;option2uniqid&#34;
                },
                {
                    &#34;optionid&#34; : &#34;option3&#34;,
                    &#34;value&#34; : &#34;option3&#34;,
                    &#34;name&#34; : &#34;Option 3&#34;,
                    &#34;hasicon&#34; : false,
                    &#34;optionnumber&#34; : 3,
                    &#34;optionuniqid&#34; : &#34;option3uniqid&#34;
                }
            ]
        }
    }</div>
    <h6 data-action="refresh" class="mb-3">core/local/dropdown/status</h6>
    <nav>
        <div class="nav nav-tabs" id="nav-tab" role="tablist">
            <a class="nav-item nav-link active"
                id="nav-rendered116-tab"
                data-bs-toggle="tab"
                href="#nav-rendered116"
                role="tab" aria-controls="nav-rendered116" aria-selected="true"
            >
                Rendered
            </a>
            <a class="nav-item nav-link"
                id="nav-template116-tab"
                data-bs-toggle="tab"
                href="#nav-template116" role="tab" aria-controls="nav-template116" aria-selected="false"
            >
                Template
            </a>
            <a class="nav-item nav-link"
                id="nav-variables116-tab"
                data-bs-toggle="tab"
                href="#nav-variables116" role="tab" aria-controls="nav-variables116" aria-selected="false"
            >
                Variables
            </a>
        </div>
    </nav>
    <div class="tab-content border-start border-bottom border-end p-3 bg-white" id="nav-tabContent">
        <div class="tab-pane fade show active" id="nav-rendered116" role="tabpanel" aria-labelledby="nav-rendered116-tab">
            <div data-region="mustacherendered" class="">
                <div class="d-flex justify-content-center my-5">
                    <div class="spinner-grow text-secondary" role="status">
                        <span class="visually-hidden">Loading...</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade" id="nav-template116" role="tabpanel" aria-labelledby="nav-template116-tab">
            <pre data-region="mustachesource" class="mb3">
            </pre>
        </div>
        <div class="tab-pane fade" id="nav-variables116" role="tabpanel" aria-labelledby="nav-variables116-tab">
            <div data-region="mustachecontext" class="mb3"><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js">    <span class="p">{</span>
        <span class="s2">&#34;buttonid&#34;</span> <span class="o">:</span> <span class="s2">&#34;example04&#34;</span><span class="p">,</span>
        <span class="s2">&#34;buttoncontent&#34;</span> <span class="o">:</span> <span class="s2">&#34;Open dialog button&#34;</span><span class="p">,</span>
        <span class="s2">&#34;dialogcontent&#34;</span> <span class="o">:</span> <span class="s2">&#34;Dialog content&#34;</span><span class="p">,</span>
        <span class="s2">&#34;choices&#34;</span> <span class="o">:</span> <span class="p">{</span>
            <span class="s2">&#34;hasoptions&#34;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&#34;options&#34;</span> <span class="o">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="s2">&#34;optionid&#34;</span> <span class="o">:</span> <span class="s2">&#34;option1&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;value&#34;</span> <span class="o">:</span> <span class="s2">&#34;option1&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;name&#34;</span> <span class="o">:</span> <span class="s2">&#34;Option 1&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;hasicon&#34;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">&#34;first&#34;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s2">&#34;optionnumber&#34;</span> <span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&#34;optionuniqid&#34;</span> <span class="o">:</span> <span class="s2">&#34;option1uniqid&#34;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&#34;optionid&#34;</span> <span class="o">:</span> <span class="s2">&#34;option2&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;value&#34;</span> <span class="o">:</span> <span class="s2">&#34;option2&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;name&#34;</span> <span class="o">:</span> <span class="s2">&#34;Option 2&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;hasicon&#34;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">&#34;selected&#34;</span> <span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="s2">&#34;optionnumber&#34;</span> <span class="o">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="s2">&#34;optionuniqid&#34;</span> <span class="o">:</span> <span class="s2">&#34;option2uniqid&#34;</span>
                <span class="p">},</span>
                <span class="p">{</span>
                    <span class="s2">&#34;optionid&#34;</span> <span class="o">:</span> <span class="s2">&#34;option3&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;value&#34;</span> <span class="o">:</span> <span class="s2">&#34;option3&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;name&#34;</span> <span class="o">:</span> <span class="s2">&#34;Option 3&#34;</span><span class="p">,</span>
                    <span class="s2">&#34;hasicon&#34;</span> <span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
                    <span class="s2">&#34;optionnumber&#34;</span> <span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
                    <span class="s2">&#34;optionuniqid&#34;</span> <span class="o">:</span> <span class="s2">&#34;option3uniqid&#34;</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span></code></pre></div></div>
        </div>
    </div>
</div>

<p>The status dropdown is an extension of the dropdown dialog, which means that all the definitions mentioned earlier can also be applied to it.</p>
<ul>
<li>The status dropdown is also compatible with all the <code>core\output\choicelist</code> extra features like:</li>
<li>Adding additional icons and descriptions to the options</li>
<li>Disable options</li>
<li>Add links to options</li>
</ul>
<p>The following example shows how to use the advanced features:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$choice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\choicelist</span><span class="p">(</span><span class="s1">&#39;Dialog content&#39;</span><span class="p">);</span>

<span class="c1">// Option one is a link.
</span><span class="c1"></span><span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="s1">&#39;Option 1&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;url&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">moodle_url</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">),</span>
<span class="p">]);</span>
<span class="c1">// Option two has an icon and description.
</span><span class="c1"></span><span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="s1">&#39;Option 2&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;description&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Option 2 description&#39;</span><span class="p">,</span>
    <span class="s1">&#39;icon&#39;</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">pix_icon</span><span class="p">(</span><span class="s1">&#39;t/hide&#39;</span><span class="p">,</span> <span class="s1">&#39;Eye icon 2&#39;</span><span class="p">)</span>
<span class="p">]);</span>
<span class="c1">// Option three is disabled.
</span><span class="c1"></span><span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option3&#39;</span><span class="p">,</span> <span class="s1">&#39;Option 3&#39;</span><span class="p">,</span> <span class="p">[</span>
    <span class="s1">&#39;disabled&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
<span class="p">]);</span>

<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">set_selected_value</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">);</span>

<span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\status</span><span class="p">(</span><span class="s1">&#39;Open dialog button&#39;</span><span class="p">,</span> <span class="nv">$choice</span><span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<h4 id="sync-button-text-with-selected-status">Sync button text with selected status</h4>
<p>The status dropdown can be configured to sync the button text with the selected status.</p>
<p>To do so, you need to set the <code>buttonsync</code> $definition attribute to <code>true</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$choice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\choicelist</span><span class="p">();</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">));</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">));</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">set_selected_value</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">);</span>

<span class="c1">// Add some attribute to select through a query selector.
</span><span class="c1"></span><span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\status</span><span class="p">(</span>
    <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;buttontext&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">),</span>
    <span class="nv">$choice</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s1">&#39;extras&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mydropdown&#39;</span><span class="p">],</span>
        <span class="s1">&#39;buttonsync&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
        <span class="c1">// With &#39;updatestatus&#39; it will change the status when the user clicks an option
</span><span class="c1"></span>        <span class="c1">// See &#34;Dropdown status in update mode&#34; section for more information.
</span><span class="c1"></span>        <span class="s1">&#39;updatestatus&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<h2 id="javascript">Javascript</h2>
<h3 id="controlling-dropdowns">Controlling dropdowns</h3>
<p>Both <code>core/local/dropdown/status</code> and <code>core/local/dropdown/status</code> AMD modules provide functions to:</p>
<ul>
<li>Open and close the dropdown.</li>
<li>Change the button content.</li>
<li>Get the main dropdown HTML element.</li>
</ul>
<p>Both modules are object-oriented. To get the dropdown instance, the process is as follows:</p>
<ol>
<li>Add id or data attributes to the main component to select it using a query selector.</li>
<li>Import <code>getDropdownDialog</code> from <code>core/local/dropdown/dialog</code>, or <code>getDropdownStatus</code> from <code>core/local/dropdown/status</code>, depending on whether you use a dialogue or a status dropdown.</li>
<li>Call <code>getDropdownDialog</code> or <code>getDropdownStatus</code> with the query selector to get the instance</li>
</ol>
<p>Both classes provide the following methods:</p>
<ul>
<li><code>setVisible(Boolean)</code> to open or close the dropdown.</li>
<li><code>isVisible()</code> to know if it is open or closed.</li>
<li><code>setButtonContent(String)</code> to replace the button content.</li>
<li><code>setButtonDisabled(Boolean)</code> to disable or enable the dropdown button.</li>
<li><code>getElement()</code>to get the main HTMLElement to add eventListeners.</li>
</ul>
<p>The following example uses the module to open the dropdown when an extra button is preset:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span><span class="nx">getDropdownDialog</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;core/local/dropdown/&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">dialog</span> <span class="o">=</span> <span class="nx">getDropdownDialog</span><span class="p">(</span><span class="s1">&#39;[MYDROPDOWNSELECTOR]&#39;</span><span class="p">);</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">&#39;[data-for=&#34;openDropdown&#34;]&#39;</span><span class="p">).</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
    <span class="nx">dialog</span><span class="p">.</span><span class="nx">setVisible</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div><h3 id="specific-dropdown-status-methods">Specific dropdown status methods</h3>
<p>The <code>core/local/dropdown/status</code> provides extra controls for the status selector, such as:</p>
<ul>
<li><code>getSelectedValue()</code> and <code>setSelectedValue(String)</code> to control the currently selected status.</li>
<li><code>isButtonSyncEnabled()</code> and <code>setButtonSyncEnabled(Boolean)</code> to synchronise the button text with the selected status.</li>
<li><code>isUpdateStatusEnabled()</code> and <code>setUpdateStatusEnabled(Boolean)</code> to control the auto-update status mode.</li>
</ul>
<h2 id="using-dropdown-status-from-the-frontend">Using dropdown status from the frontend</h2>
<p>The dropdown status can operate in two different ways.</p>
<h3 id="dropdown-status-in-display-only">Dropdown status in display only</h3>
<p>The display-only is the default behaviour for any dropdown. In display-only mode, the component will show all the status values to the user, but it won&rsquo;t handle and click the event nor change the current status.</p>
<p>If a plugin wants to change the status value when the user clicks, it should  code a custom module to:</p>
<ol>
<li>Capture <code>click</code> event listeners to the choice items.</li>
<li>Send the new status to the backend (using an ad-hoc webservice).</li>
<li>If the webservice execution is ok, update the component value using the <code>setSelectedValue</code> instance method.</li>
</ol>
<p>The following example shows how to render a display-only dropdown status in the backend:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$choice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\choicelist</span><span class="p">(</span><span class="s1">&#39;Dialog content&#39;</span><span class="p">);</span>

<span class="c1">// Add some data attributes to the choices.
</span><span class="c1"></span><span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span>
    <span class="s1">&#39;option1&#39;</span><span class="p">,</span>
    <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">),</span> <span class="p">[</span>
    <span class="nx">extras</span><span class="s1">&#39; =&gt; [&#39;</span><span class="nx">data</span><span class="o">-</span><span class="nx">action</span><span class="s1">&#39; =&gt; &#39;</span><span class="nx">updateActionName</span><span class="s1">&#39;]
</span><span class="s1">]);
</span><span class="s1">$choice-&gt;add_option(
</span><span class="s1">    &#39;</span><span class="nx">option2</span><span class="s1">&#39;,
</span><span class="s1">    get_string(&#39;</span><span class="nx">option2</span><span class="s1">&#39;, YOURPLUGIN), [
</span><span class="s1">    extras&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;data-action&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;updateActionName&#39;</span><span class="p">]</span>
<span class="p">]);</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">set_selected_value</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">);</span>

<span class="c1">// Add some attribute to select through a query selector.
</span><span class="c1"></span><span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\status</span><span class="p">(</span>
    <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;buttontext&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">),</span>
    <span class="nv">$choice</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;extras&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mydropdown&#39;</span><span class="p">]]</span>
<span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<p>Having this PHP code, the AMD controller could be something like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span><span class="nx">getDropdownStatus</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;core/local/dropdown/status&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">sendValueToTheBackend</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;YOURPLUGIN/example&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">getDropdownStatus</span><span class="p">(</span><span class="s1">&#39;#mydropdown&#39;</span><span class="p">);</span>
<span class="nx">status</span><span class="p">.</span><span class="nx">getElement</span><span class="p">().</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">option</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s2">&#34;[data-action=&#39;updateActionName&#39;]&#34;</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">option</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">sendValueToTheBackend</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">value</span><span class="p">))</span> <span class="p">{</span>
             <span class="nx">status</span><span class="p">.</span><span class="nx">setSelectedValue</span><span class="p">(</span><span class="nx">option</span><span class="p">.</span><span class="nx">dataset</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Do some error handling here.
</span><span class="c1"></span>    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><h3 id="dropdown-status-in-update-mode">Dropdown status in update mode</h3>
<p>The component will act more like an HTML radio button in update mode. It will store the current status value and will trigger <code>change</code> events when the value changes.</p>
<p>In this case, the plugin controller has to:</p>
<ol>
<li>Capture the component element <code>change</code> event. Remember that, as in radio events, the <code>change</code> event won&rsquo;t bubble, so it cannot be delegated to a parent element.</li>
<li>Send the new status to the backend (using an ad-hoc webservice).</li>
<li>If the webservice execution fails, do a value rollback using the <code>setSelectedValue</code> instance method.</li>
</ol>
<p>The following example shows how to render an update mode dropdown status in the backend:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-php" data-lang="php"><span class="o">&lt;?</span><span class="nx">php</span> 
<span class="nv">$choice</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\choicelist</span><span class="p">(</span><span class="s1">&#39;Dialog content&#39;</span><span class="p">);</span>

<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;option1&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">));</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">add_option</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">));</span>
<span class="nv">$choice</span><span class="o">-&gt;</span><span class="na">set_selected_value</span><span class="p">(</span><span class="s1">&#39;option2&#39;</span><span class="p">);</span>

<span class="c1">// Add some attribute to select through a query selector.
</span><span class="c1"></span><span class="nv">$dialog</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">core\output\local\dropdown\status</span><span class="p">(</span>
    <span class="nx">get_string</span><span class="p">(</span><span class="s1">&#39;buttontext&#39;</span><span class="p">,</span> <span class="nx">YOURPLUGIN</span><span class="p">),</span>
    <span class="nv">$choice</span><span class="p">,</span>
    <span class="p">[</span>
        <span class="s1">&#39;extras&#39;</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">&#39;id&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;mydropdown&#39;</span><span class="p">],</span>
        <span class="s1">&#39;updatestatus&#39;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
    <span class="p">]</span>
<span class="p">);</span>
<span class="k">echo</span> <span class="nv">$OUTPUT</span><span class="o">-&gt;</span><span class="na">render</span><span class="p">(</span><span class="nv">$dialog</span><span class="p">);</span>
 <span class="cp">?&gt;</span><span class="err">
</span></code></pre></div>
<p>Having this PHP code, the AMD controller could be something like:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="kr">import</span> <span class="p">{</span><span class="nx">getDropdownStatus</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;core/local/dropdown/status&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span><span class="nx">sendValueToTheBackend</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;YOURPLUGIN/example&#39;</span><span class="p">;</span>

<span class="kr">const</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">getDropdownStatus</span><span class="p">(</span><span class="s1">&#39;#mydropdown&#39;</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">status</span><span class="p">.</span><span class="nx">getSelectedValue</span><span class="p">();</span>

<span class="nx">status</span><span class="p">.</span><span class="nx">getElement</span><span class="p">().</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">&#39;change&#39;</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">currentValue</span> <span class="o">==</span> <span class="nx">status</span><span class="p">.</span><span class="nx">getSelectedValue</span><span class="p">())</span> <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">try</span> <span class="p">{</span>
        <span class="nx">sendValueToTheBackend</span><span class="p">(</span><span class="nx">status</span><span class="p">.</span><span class="nx">getSelectedValue</span><span class="p">());</span>
        <span class="nx">currentValue</span> <span class="o">=</span> <span class="nx">status</span><span class="p">.</span><span class="nx">getSelectedValue</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">status</span><span class="p">.</span><span class="nx">setSelectedValue</span><span class="p">(</span><span class="nx">currentValue</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">});</span>
</code></pre></div><p><strong>Note</strong>: the <code>event.target</code> is also the main element. You can also get the current value from <code>event.target.dataset.value</code> if you prefer.</p>
<h2 id="examples">Examples</h2>
<!-- markdownlint-disable-next-line MD033 -->
<iframe src="../../../../examples/dropdowns.php" style="overflow:hidden;height:400px;width:100%;border:0" title="Moodle dynamic tabs"></iframe>

        </div>
        
    </div>
</div>
