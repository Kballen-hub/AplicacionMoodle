function degrade_AccessTool(html){this.init={link:"",contact:"",buttonPosition:"right"},this.buildToolBox(html)&&(this.toolBox=document.getElementById("mic-access-tool-box"),this.toolBoxOpenButton=document.getElementById("mic-access-tool-general-button"),this.toolBoxCloseButton=document.getElementById("mic-access-tool-box-close-button"),this.toolBoxOpenButton.addEventListener("click",this.openBox.bind(this)),this.toolBoxCloseButton.addEventListener("click",this.closeBox.bind(this)),document.addEventListener("keyup",this.openCloseBoxKeyboard.bind(this)),this.micContrastMonochrome=document.getElementById("mic-toolbox-contrast-monochrome"),this.micContrastSoft=document.getElementById("mic-toolbox-contrast-soft"),this.micContrastHard=document.getElementById("mic-toolbox-contrast-hard"),this.micContrastMonochrome.addEventListener("click",this.contrastChange),this.micContrastSoft.addEventListener("click",this.contrastChange),this.micContrastHard.addEventListener("click",this.contrastChange),this.micDisableButtonsAnimations=document.getElementById("mic-toolbox-disable-buttons-animations"),this.micDisableButtonsAnimations.addEventListener("click",this.onceButtonChange),this.micdyslexic=document.getElementById("mic-dyslexic-buttons"),this.micdyslexic.addEventListener("click",this.onceButtonChange),this.micDisableButtonsKeyboard=document.getElementById("mic-toolbox-disable-buttons-keyboard"),this.micDisableButtonsKeyboard.addEventListener("click",this.onceButtonChange),this.micToolboxFontsUp=document.getElementById("mic-toolbox-fonts-up"),this.micToolboxFontsDown=document.getElementById("mic-toolbox-fonts-down"),this.micToolboxFontsSimple=document.getElementById("mic-toolbox-fonts-simple"),this.micToolboxFontsUp.addEventListener("click",this.fontsChange),this.micToolboxFontsDown.addEventListener("click",this.fontsChange),this.micToolboxFontsSimple.addEventListener("click",this.onceButtonChange),this.micToolboxContentLinks=document.getElementById("mic-toolbox-content-links"),this.micToolboxContentHeaders=document.getElementById("mic-toolbox-content-headers"),this.micToolboxContentImages=document.getElementById("mic-toolbox-content-images"),this.micToolboxContentLinks.addEventListener("click",this.onceButtonChange),this.micToolboxContentHeaders.addEventListener("click",this.onceButtonChange),this.micToolboxContentImages.addEventListener("click",this.onceButtonChange),this.micToolboxCursorWhite=document.getElementById("mic-toolbox-cursor-big-white"),this.micToolboxCursorBlack=document.getElementById("mic-toolbox-cursor-big-black"),this.micToolboxZoomUp=document.getElementById("mic-toolbox-zoom-up"),this.micToolboxCursorWhite.addEventListener("click",this.cursorChange),this.micToolboxCursorBlack.addEventListener("click",this.cursorChange),this.micToolboxZoomUp.addEventListener("click",this.onceButtonChange),this.micToolboxDisableButtonsAll=document.getElementById("mic-toolbox-disable-buttons-reset-all"),this.micToolboxDisableButtonsAll.addEventListener("click",this.resetApp.bind(this))),this.initialApp()}define("theme_degrade/acctoolbar",["core/templates"],(function(Templates){return{init:function(){Templates.render("theme_degrade/settings/acctoolbar",{}).then((function(html,js){window.micAccessTool=new degrade_AccessTool(html)})).fail((function(ex){}))}}})),degrade_AccessTool.prototype.initialApp=function(){window.degrade_toolboxAppstate=JSON.parse(localStorage.getItem("degrade_ACCESSTOOL"))||{bodyClassList:{},fontSize:1,imagesTitle:!1,keyboardRoot:!1,initFontSize:!1};const iframe=document.querySelector("iframe.h5p-initialized");if(iframe){const cssLink=iframe.contentDocument.createElement("link");cssLink.rel="stylesheet",cssLink.href=`${M.cfg.wwwroot}/theme/degrade/style/style-h5p.css`,cssLink.type="text/css",iframe.contentDocument.head.appendChild(cssLink),this.initialApp_iframe(iframe)}if(window.degrade_toolboxAppstate.bodyClassList)for(var bodyClass in window.degrade_toolboxAppstate.bodyClassList){var initBodyClassList=window.degrade_toolboxAppstate.bodyClassList[bodyClass],enabledButton=document.getElementById(initBodyClassList);enabledButton&&enabledButton.classList.add("vi-enabled"),document.body.classList.add(initBodyClassList)}(window.degrade_toolboxAppstate.fontSize>1&&this.initFontsChange(),window.degrade_toolboxAppstate.imagesTitle&&this.imagesAddTitles(),window.degrade_toolboxAppstate.keyboardRoot&&this.keyboardRootEnable(),"right"===this.init.buttonPosition)&&(document.getElementById("mic-access-tool-general-button")&&(document.getElementById("mic-access-tool-general-button").classList.add("mic-access-tool-general-button-right"),document.getElementById("mic-access-tool-box").classList.add("mic-access-tool-box-right")))},degrade_AccessTool.prototype.initialApp_iframe=function(iframe){setInterval((function(){var appstate=JSON.parse(localStorage.getItem("degrade_ACCESSTOOL"))||{bodyClassList:!1};if(iframe.contentDocument.body.classList=[],appstate.bodyClassList)for(var bodyClass in appstate.bodyClassList){var initBodyClassList=appstate.bodyClassList[bodyClass];iframe.contentDocument.body.classList.add(initBodyClassList)}}),2e3)},degrade_AccessTool.prototype.buildToolBox=function(html){if(document.querySelector("body.pagelayout-embedded"))return!1;var i=document.createElement("div");return i.id="mic-init-access-tool",i.innerHTML=html,document.body.insertBefore(i,document.body.firstChild),!0},degrade_AccessTool.prototype.contrastChange=function(event){if(event.preventDefault(),document.body.classList.contains(this.id))this.classList.remove("vi-enabled"),document.body.classList.remove(this.id),delete window.degrade_toolboxAppstate.bodyClassList[this.id];else{for(var buttons=document.querySelectorAll(".mic-contrast-block button"),i=0;i<buttons.length;i++)buttons[i].classList.remove("vi-enabled"),document.body.classList.remove(buttons[i].id),delete window.degrade_toolboxAppstate.bodyClassList[buttons[i].id];this.classList.add("vi-enabled"),document.body.classList.add(this.id),window.degrade_toolboxAppstate.bodyClassList[this.id]=this.id}degrade_AccessTool.prototype.updateState()},degrade_AccessTool.prototype.cursorChange=function(event){if(event.preventDefault(),document.body.classList.contains(this.id))this.classList.remove("vi-enabled"),document.body.classList.remove(this.id),delete window.degrade_toolboxAppstate.bodyClassList[this.id];else{for(var buttons=document.querySelectorAll("#mic-toolbox-cursor-big-black,#mic-toolbox-cursor-big-white"),i=0;i<buttons.length;i++)buttons[i].classList.remove("vi-enabled"),document.body.classList.remove(buttons[i].id),delete window.degrade_toolboxAppstate.bodyClassList[buttons[i].id];this.classList.add("vi-enabled"),document.body.classList.add(this.id),window.degrade_toolboxAppstate.bodyClassList[this.id]=this.id}degrade_AccessTool.prototype.updateState()},degrade_AccessTool.prototype.onceButtonChange=function(event){event.preventDefault(),"mic-toolbox-disable-buttons-keyboard"===this.id&&(window.degrade_toolboxAppstate.keyboardRoot=!window.degrade_toolboxAppstate.keyboardRoot,degrade_AccessTool.prototype.keyboardRootEnable()),"mic-toolbox-content-images"===this.id&&degrade_AccessTool.prototype.imagesChange(),document.body.classList.contains(this.id)?(this.classList.remove("vi-enabled"),document.body.classList.remove(this.id),delete window.degrade_toolboxAppstate.bodyClassList[this.id]):(this.classList.add("vi-enabled"),document.body.classList.add(this.id),window.degrade_toolboxAppstate.bodyClassList[this.id]=this.id),degrade_AccessTool.prototype.updateState()},degrade_AccessTool.prototype.keyboardRootEnable=function(){if(window.degrade_toolboxAppstate.keyboardRoot)for(var headers=document.querySelectorAll("h1,h2,h3,h4,h5,h6,p,a,button,input,select,textarea"),i=0;i<headers.length;i++){headers[i].tabIndex=i+1}else window.location.reload()},degrade_AccessTool.prototype.fontsChange=function(event){event.preventDefault();var counter=window.degrade_toolboxAppstate.fontSize;if("mic-toolbox-fonts-up"===this.id){if(counter>=1.6)return;for(var items=document.querySelectorAll("body,h1,h2,h3,h4,h5,h6,p,a,button,input,textarea,li,td,th,strong,span,blockquote,div"),i=0;i<items.length;i++){var item=items[i],font=window.getComputedStyle(item).getPropertyValue("font-size").split("px"),fontSize=Number(font[0]);item.style.fontSize=(1.1*fontSize).toFixed()+"px"}counter=(1.1*counter).toFixed(2)}if("mic-toolbox-fonts-down"===this.id){if(counter<=1)return window.degrade_toolboxAppstate.fontSize=1,void degrade_AccessTool.prototype.updateState();for(items=document.querySelectorAll("body,h1,h2,h3,h4,h5,h6,p,a,button,input,textarea,li,td,th,strong,span,blockquote,div"),i=0;i<items.length;i++){item=items[i],font=window.getComputedStyle(item).getPropertyValue("font-size").split("px"),fontSize=Number(font[0]);item.style.fontSize=(fontSize/1.1).toFixed()+"px"}counter=(counter/1.1).toFixed(2)}window.degrade_toolboxAppstate.fontSize=counter,degrade_AccessTool.prototype.getFontsChanges(counter),degrade_AccessTool.prototype.updateState()},degrade_AccessTool.prototype.initFontsChange=function(){for(var items=document.querySelectorAll("body,h1,h2,h3,h4,h5,h6,p,a,button,input,textarea,li,td,th,strong,span,blockquote,div"),initFontSize=window.degrade_toolboxAppstate.fontSize,i=0;i<items.length;i++){var item=items[i],font=window.getComputedStyle(item).getPropertyValue("font-size");item.style.fontSize=font;var fs=item.style.fontSize.split("px")}for(i=0;i<items.length;i++){item=items[i],font=window.getComputedStyle(item).getPropertyValue("font-size").split("px"),fs=Number(font[0]);item.style.fontSize=(fs*initFontSize).toFixed()+"px"}initFontSize&&this.getFontsChanges(initFontSize)},degrade_AccessTool.prototype.initFontsChangeFirst=function(){for(var items=document.querySelectorAll("body,h1,h2,h3,h4,h5,h6,p,a,button,input,textarea,li,td,th,strong,span,blockquote,div"),i=0;i<items.length;i++){var item=items[i],font=window.getComputedStyle(item).getPropertyValue("font-size");item.style.fontSize=font;item.style.fontSize.split("px")}},degrade_AccessTool.prototype.getFontsChanges=function(initFontSize){if(initFontSize>1){document.getElementById("mic-toolbox-fonts-up").classList.add("vi-font-enabled");var perc="+"+(100*Number(initFontSize)-100).toFixed()+"%";document.getElementById("mic-toolbox-fonts-up-enabled").textContent=perc}else document.getElementById("mic-toolbox-fonts-up").classList.remove("vi-font-enabled"),document.getElementById("mic-toolbox-fonts-up-enabled").textContent=""},degrade_AccessTool.prototype.imagesChange=function(){if(document.body.classList.contains("mic-toolbox-content-images")){for(var titles=document.querySelectorAll(".mic-toolbox-images-titles"),i=0;i<titles.length;i++){titles[i].parentElement.removeChild(titles[i])}window.degrade_toolboxAppstate.imagesTitle=!1}else this.imagesAddTitles(),window.degrade_toolboxAppstate.imagesTitle=!0},degrade_AccessTool.prototype.imagesAddTitles=function(){for(var images=document.images,i=0;i<images.length;i++){var title,img=images[i];if(img.alt)(title=document.createElement("span")).className="mic-toolbox-images-titles",title.textContent=img.alt,img.parentNode.insertBefore(title,img);else(title=document.createElement("span")).className="mic-toolbox-images-titles",title.textContent="image without text",img.parentNode.insertBefore(title,img)}},degrade_AccessTool.prototype.updateState=function(){var jsonSting=JSON.stringify(window.degrade_toolboxAppstate);"undefined"!=typeof Storage?localStorage.setItem("degrade_ACCESSTOOL",jsonSting):console.log("No Storage Found")},degrade_AccessTool.prototype.openBox=function(event){this.toolBox.classList.add("opened-mic-access-tool"),(!window.degrade_toolboxAppstate.initFontSize||window.degrade_toolboxAppstate.fontSize<=1)&&(this.initFontsChangeFirst(),window.degrade_toolboxAppstate.initFontSize=!0),this.toolBoxCloseButton.focus()},degrade_AccessTool.prototype.closeBox=function(event){this.toolBox.classList.remove("opened-mic-access-tool")},degrade_AccessTool.prototype.openCloseBoxKeyboard=function(event){27==event.keyCode&&this.closeBox(),event.ctrlKey&&113==event.keyCode&&this.openBox()},degrade_AccessTool.prototype.resetApp=function(event){localStorage.removeItem("degrade_ACCESSTOOL"),window.location.reload()};

//# sourceMappingURL=acctoolbar.min.js.map